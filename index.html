<!DOCTYPE html>
<html lang="tr">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Premier League | Dashboard</title>
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@300;400;500;600;700;800&display=swap" rel="stylesheet">
    <style>
        :root {
            --bg-color: #f4f7f9;
            --card-bg: #ffffff;
            --text-dark: #1f2937;
            --text-muted: #6b7280;
            --pl-purple: #3d195b;
            --pl-green: #00ff85;
            --border-color: #e5e7eb;
        }

        * { box-sizing: border-box; margin: 0; padding: 0; }

        body {
            font-family: 'Inter', sans-serif;
            background-color: var(--bg-color);
            color: var(--text-dark);
            height: 100vh;
            display: flex;
            justify-content: center;
            align-items: center;
            overflow: hidden;
        }

        .main-container {
            width: 95%;
            max-width: 1200px;
            height: 92vh;
            background: var(--card-bg);
            border-radius: 16px;
            box-shadow: 0 10px 25px rgba(0,0,0,0.05);
            display: flex;
            flex-direction: column;
            padding: 25px 40px;
            border: 1px solid var(--border-color);
        }

        .navbar {
            display: flex;
            gap: 10px;
            margin-bottom: 25px;
            padding-bottom: 15px;
            border-bottom: 1px solid var(--border-color);
        }

        .nav-btn {
            text-decoration: none;
            color: var(--pl-purple);
            font-size: 0.85rem;
            font-weight: 700;
            padding: 10px 20px;
            border-radius: 8px;
            background: #f8f9fa;
            border: 1px solid var(--border-color);
            transition: 0.3s;
        }

        .nav-btn:hover, .nav-btn.active {
            background: var(--pl-purple);
            color: var(--pl-green);
        }

        .hero {
            background: linear-gradient(135deg, var(--pl-purple) 0%, #2a113f 100%);
            border-radius: 12px;
            padding: 30px;
            color: white;
            margin-bottom: 25px;
        }

        .hero h2 { font-size: 2rem; font-weight: 800; margin-bottom: 5px; }
        .hero p { color: var(--pl-green); font-weight: 500; opacity: 0.9; }

        .stats-grid {
            display: grid;
            grid-template-columns: repeat(4, 1fr);
            gap: 20px;
            margin-bottom: 25px;
        }

        .stat-card {
            background: #fff;
            border: 1px solid var(--border-color);
            border-radius: 12px;
            padding: 20px;
            text-align: center;
            transition: 0.3s;
        }

        .stat-card:hover { transform: translateY(-5px); border-color: var(--pl-green); }
        .stat-card span { display: block; color: var(--text-muted); font-size: 0.75rem; font-weight: 700; text-transform: uppercase; margin-bottom: 8px; }
        .stat-card h3 { font-size: 1.2rem; color: var(--pl-purple); font-weight: 700; }

        /* Sonuçlar Barı - Dinamik alan */
        .results-bar {
            background: #f8f9fa;
            border-radius: 8px;
            padding: 15px;
            display: flex;
            justify-content: space-around;
            align-items: center;
            border: 1px solid var(--border-color);
            margin-bottom: 25px;
            min-height: 55px;
        }

        .match-score { font-size: 0.85rem; font-weight: 600; }
        .match-score span { color: var(--pl-purple); margin: 0 5px; background: #eee; padding: 2px 6px; border-radius: 4px; }

        .footer-banner {
            margin-top: auto;
            text-align: center;
            padding: 20px;
            border-top: 1px solid var(--border-color);
            font-weight: 800;
            color: var(--pl-purple);
            letter-spacing: 2px;
            text-transform: uppercase;
            font-size: 0.8rem;
        }
    </style>
</head>
<body>

    <div class="main-container">
        <nav class="navbar">
            <a href="index.html" class="nav-btn active">Ana Sayfa</a>
            <a href="puan_durumu.html" class="nav-btn">Puan Durumu</a>
            <a href="gol_kralligi.html" class="nav-btn">Gol Krallığı</a>
            <a href="asist_kralligi.html" class="nav-btn">Asist Krallığı</a>
            <a href="gol_yenmeyen_mac.html" class="nav-btn">Gol Yenmeyen Maç</a>
        </nav>

        <div class="hero">
            <h2>Premier Lig'e Hoş Geldin</h2>
            <p id="heroDate">Sezon 2025/26</p>
        </div>

        <div class="stats-grid">
            <div class="stat-card">
                <span>Lig Lideri</span>
                <h3 id="topTeam">-</h3>
            </div>
            <div class="stat-card">
                <span>Gol Kralı</span>
                <h3 id="topScorer">-</h3>
            </div>
            <div class="stat-card">
                <span>Asist Kralı</span>
                <h3 id="topAssister">-</h3>
            </div>
            <div class="stat-card">
                <span>Toplam Gol</span>
                <h3 id="totalGoals">0</h3>
            </div>
        </div>

        <div class="results-bar" id="recentMatchesBar">
            <div class="match-score" style="color: var(--text-muted);">Henüz maç verisi girilmedi.</div>
        </div>

        <div class="footer-banner">
            No Room For Racism • This is Premier League
        </div>
    </div>

    <script>
        // Veri Anahtarları
        const STANDINGS_KEY = 'leagueStandingsData';
        const MATCHES_KEY = 'lastMatchesData';
        const SCORERS_KEY = 'topScorersData';
        const ASSISTS_KEY = 'topAssistsData';

        function updateDashboard() {
            // 1. Puan Durumu Verilerini Al (Lider ve Toplam Gol)
            const storedStandings = localStorage.getItem(STANDINGS_KEY);
            if (storedStandings) {
                const teams = JSON.parse(storedStandings);
                
                // Lideri bul (Puan ve sonra Averaj)
                teams.sort((a, b) => b.Puan - a.Puan || b.AV - a.AV);
                document.getElementById('topTeam').textContent = teams[0].name;

                // Toplam Golü Hesapla (AG = Atılan Gol)
                const total = teams.reduce((sum, team) => sum + (parseInt(team.AG) || 0), 0);
                document.getElementById('totalGoals').textContent = total;
            }

            // 2. SON 6 MAÇI GÜNCELLE (Skor girişinden gelen veriler)
            const recentMatchesBar = document.getElementById('recentMatchesBar');
            const storedMatches = localStorage.getItem(MATCHES_KEY);

            if (storedMatches) {
                const matches = JSON.parse(storedMatches);
                if (matches.length > 0) {
                    recentMatchesBar.innerHTML = ''; // Varsayılan yazıyı temizle

                    // Sadece son 6 maçı göster
                    matches.slice(0, 6).forEach(match => {
                        const matchDiv = document.createElement('div');
                        matchDiv.className = 'match-score';
                        
                        // Takım isimlerinin ilk 3 harfini kısaltma olarak kullan
                        const hKisa = match.home.substring(0, 3).toUpperCase();
                        const aKisa = match.away.substring(0, 3).toUpperCase();
                        
                        matchDiv.innerHTML = `${hKisa} <span>${match.score}</span> ${aKisa}`;
                        recentMatchesBar.appendChild(matchDiv);
                    });
                }
            }

            // 3. Gol Kralını Al (Veri varsa)
            const storedScorers = localStorage.getItem(SCORERS_KEY);
            if (storedScorers) {
                const scorers = JSON.parse(storedScorers);
                scorers.sort((a, b) => b.goals - a.goals);
                document.getElementById('topScorer').textContent = scorers[0].name;
            } else {
                document.getElementById('topScorer').textContent = "Veri Yok";
            }

            // 4. Asist Kralını Al (Veri varsa)
            const storedAssists = localStorage.getItem(ASSISTS_KEY);
            if (storedAssists) {
                const assists = JSON.parse(storedAssists);
                assists.sort((a, b) => b.assists - a.assists);
                document.getElementById('topAssister').textContent = assists[0].name;
            } else {
                document.getElementById('topAssister').textContent = "Veri Yok";
            }
        }

        // Sayfa yüklendiğinde dashboard'u güncelle
        document.addEventListener('DOMContentLoaded', updateDashboard);
    </script>
</body>
</html>