<!DOCTYPE html>
<html lang="tr">
<head>
    <meta charset="UTF-8">
    <title>PL Admin | Maç Ekle</title>
    <style>
        :root { --pl-purple: #3d195b; --pl-green: #00ff87; }
        body { font-family: 'Poppins', sans-serif; background: #f2f2f2; display: flex; justify-content: center; padding: 40px; }
        .admin-box { background: white; width: 100%; max-width: 500px; padding: 30px; border-radius: 12px; border-top: 8px solid var(--pl-purple); box-shadow: 0 10px 25px rgba(0,0,0,0.1); }
        input { width: 100%; padding: 12px; margin: 10px 0; border: 1px solid #ccc; border-radius: 6px; box-sizing: border-box; font-family: inherit; }
        button { background: var(--pl-purple); color: white; border: none; padding: 15px; width: 100%; border-radius: 6px; font-weight: bold; cursor: pointer; transition: 0.3s; font-family: inherit; }
        button:hover { background: #5a2a85; }
        button:disabled { background: #ccc; cursor: not-allowed; }
        .info { font-size: 12px; color: #666; margin-bottom: 2px; display: block; font-weight: 600; }
    </style>
</head>
<body>

<div class="admin-box">
    <h2>Maç Tekrarı Ekle</h2>
    <span class="info">Maç Başlığı (Takımlar ve Hafta)</span>
    <input type="text" id="matchTitle" placeholder="Örn: Liverpool 2-2 Man City / 15. Hafta">
    
    <span class="info">Kapak Fotoğrafı URL</span>
    <input type="text" id="matchThumb" placeholder="https://resim-linki.com/gorsel.jpg">
    
    <span class="info">Video URL (YouTube, Dailymotion, Streamable)</span>
    <input type="text" id="videoUrl" placeholder="Videonun tam linkini yapıştırın">
    
    <button id="btnSave">MAÇI SİSTEME EKLE</button>
</div>

<script type="module">
    import { initializeApp } from "https://www.gstatic.com/firebasejs/9.15.0/firebase-app.js";
    import { getDatabase, ref, push } from "https://www.gstatic.com/firebasejs/9.15.0/firebase-database.js";

    const firebaseConfig = {
        apiKey: "AIzaSyBeDf5CxbElVbkl8wGXSAZ9DBxOWxOorxc",
        authDomain: "premierligrp.firebaseapp.com",
        databaseURL: "https://premierligrp-default-rtdb.europe-west1.firebasedatabase.app",
        projectId: "premierligrp",
        storageBucket: "premierligrp.firebasestorage.app",
        messagingSenderId: "762350145530",
        appId: "1:762350145530:web:657b94791a29bc0ddd1e43"
    };

    const app = initializeApp(firebaseConfig);
    const db = getDatabase(app);
    const btn = document.getElementById("btnSave");

    btn.addEventListener("click", () => {
        const title = document.getElementById("matchTitle").value;
        const thumb = document.getElementById("matchThumb").value;
        const url = document.getElementById("videoUrl").value;

        if(title && url) {
            btn.disabled = true; // Çift kayıt engeli
            btn.innerText = "YÜKLENİYOR...";

            push(ref(db, 'mac_tekrarlari'), {
                title: title,
                thumb: thumb,
                videoUrl: url,
                timestamp: Date.now()
            }).then(() => {
                alert("Maç başarıyla eklendi!");
                window.location.href = "mac_tekrarlari.html";
            }).catch((err) => {
                alert("Hata: " + err);
                btn.disabled = false;
                btn.innerText = "MAÇI SİSTEME EKLE";
            });
        } else {
            alert("Lütfen başlık ve video linkini girin!");
        }
    });
</script>
</body>
</html>